apiVersion: v1
baseDomain: okd.local
metadata:
  name: lab

compute:
- hyperthreading: Enabled
  name: worker
  replicas: 0

controlPlane:
  hyperthreading: Enabled
  name: master
  replicas: 3

networking:
  clusterNetwork:
  - cidr: 10.128.0.0/14
    hostPrefix: 23
  networkType: OpenShiftSDN
  serviceNetwork:
  - 172.30.0.0/16

platform:
  none: {}

fips: false
pullSecret: '{"auths":{"fake":{"auth": "bar"}}}'
sshKey: 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC4NrngJDRJBXh56QNztLs+xZ5rZ+mU9P+qcSj+iAZLna3qbFWhd+YeMphgUrek+ooo7614aaapgM4Ihu5lw/LV18eStV8Ota/mjbsJ5w9/rNIaZeHKASm4lR5KNARTvSpY+5dOhS/ADdunvEjJ7jrO34VV5iCXjRZt8CdramN1m5cggDBOjATaMmuPcu38Ek7ehZ+cMzTv7SFddP0fDmM4CtIpqGRJmTrAf7gFPrGEuHqQQiXIFrKquPvshvo+1LrTHygwSKBlQSpKND+3Esqpmv2tEDw6jJtivqHEXwpaJxBNvOtMMl4kXIlwlRrXZAp6Au5/jXFmh5rVYHwRpT5l5fBOARnFxTtq6e7KdaGQSIMPhHCoUEN89tjOK/Hj4Y23PmnwSGGahLU6jl9JIGvDAiKiGXiaivGA0WLVfsU+GxlhcM+z3rCOTg2GiBn5v6fna+EHry7V2wH4KcW9qs5WRPBT4DGjyYltrBces20kLmwirbzxa10h9oDKEiwFuQ6nEOz0JTasZkdKzZf6f5/IA/muX0DwiDRRULq4HzMZHYMUqGyj423kVwdC/a44h+nUFMvAzBTGN9uHY1m5ZbbODkKxAx/Zxl9vq1ukZCjiLFTlg50/8IGKxpz9PCDUJV8cdQ5sEqL3v5sTl+qGKBrx2TiFU3WrPhnZqEdxbSIMnw== glenn@ansible'


passwd:
  users:
    - name: core
      ssh_authorized_keys:
        - 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDNdXEL6WnxTjjiWvUQwxtAt6Ne2zP9fNWaXUyCcJU0qp6S8rWNQCzNq3DV1STJUMMeCyEJE5tomYpqsRPE2Aa5S7R8Rb34/CT7h0rKuo2JCmEuytAJ5vRnLMQfK8SMh3vvyoUACinFdfqyvdAGNr9WS597hjTzePSZo0Wv5pc8/Owxazp1YFkvzWmLkOeevrNUw3SlFBjEjzO68Pj0QqXaICeXnFRt37PakNLMbFhRisjH2QwdEtPjhY979jUSRkD+xNxr23vyNL0e5xVlcXkwEUYzGUjLcNOQdF3NKfg1TQM/DqmS3h8DEab+JHfqAQ5HRcYHERxyvFyxf47ozMGuNHSFJYXmh0RHMpmoBXXjtdjtXaY1JYP0YXwtraB5mWGYkWaOhVn6MT3Jn9DjmLIGhzwiNheGNRIrwvf93IU29zoJfYrHnMWdxMEIPNzHDq++WrHSI72lUmVP+6WMZ6oaCm4kAlMet+4/l32R8o9BPgz/eINhbwOCyU1673FmnuqLBPFBxAI04HDJ1PJiYYimPektVxk7IUF0tpyOU26Wgj0cHKC/Aq91dTtQQ7VAdfAPKxGGlCQtC6TlOgB3V/yEROAD8hY536kaGtW4dARgxbgbdrJfE8yiZKLcSeTEkWK+0jFdJ51wQkL+syK70r9ZC+2Zp1BGjlBe7/Wrd+dm0w== glenn@settler01.gshome.lan'
        - 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC4NrngJDRJBXh56QNztLs+xZ5rZ+mU9P+qcSj+iAZLna3qbFWhd+YeMphgUrek+ooo7614aaapgM4Ihu5lw/LV18eStV8Ota/mjbsJ5w9/rNIaZeHKASm4lR5KNARTvSpY+5dOhS/ADdunvEjJ7jrO34VV5iCXjRZt8CdramN1m5cggDBOjATaMmuPcu38Ek7ehZ+cMzTv7SFddP0fDmM4CtIpqGRJmTrAf7gFPrGEuHqQQiXIFrKquPvshvo+1LrTHygwSKBlQSpKND+3Esqpmv2tEDw6jJtivqHEXwpaJxBNvOtMMl4kXIlwlRrXZAp6Au5/jXFmh5rVYHwRpT5l5fBOARnFxTtq6e7KdaGQSIMPhHCoUEN89tjOK/Hj4Y23PmnwSGGahLU6jl9JIGvDAiKiGXiaivGA0WLVfsU+GxlhcM+z3rCOTg2GiBn5v6fna+EHry7V2wH4KcW9qs5WRPBT4DGjyYltrBces20kLmwirbzxa10h9oDKEiwFuQ6nEOz0JTasZkdKzZf6f5/IA/muX0DwiDRRULq4HzMZHYMUqGyj423kVwdC/a44h+nUFMvAzBTGN9uHY1m5ZbbODkKxAx/Zxl9vq1ukZCjiLFTlg50/8IGKxpz9PCDUJV8cdQ5sEqL3v5sTl+qGKBrx2TiFU3WrPhnZqEdxbSIMnw== glenn@ansible'
systemd:
  units:
    - name: serial-getty@ttyS0.service
      dropins:
      - name: autologin-core.conf
        contents: |
          [Service]
          # Override Execstart in main unit
          ExecStart=
          # Add new Execstart with `-` prefix to ignore failure
          ExecStart=-/usr/sbin/agetty --autologin core --noclear %I $TERM
          TTYVTDisallocate=no
storage:
  files:
    - path: /etc/zincati/config.d/90-disable-auto-updates.toml
      contents:
        inline: |
          [updates]
          enabled = false
    - path: /etc/zincati/config.d/99-issues-481.toml
      mode: 0644
      contents:
        inline: |
          [cincinnati]
          base_url= "https://updates.coreos.fedoraproject.org"
          # https://github.com/coreos/fedora-coreos-tracker/issues/481#issuecomment-653011069
          [updates]
          allow_downgrade = true
    - path: /etc/profile.d/systemd-pager.sh
      mode: 0644
      contents:
        inline: |
          # Tell systemd to not use a pager when printing information
          export SYSTEMD_PAGER=cat
    - path: /etc/sysctl.d/20-silence-audit.conf
      mode: 0644
      contents:
        inline: |
          # Raise console message logging level from DEBUG (7) to WARNING (4)
          # to hide audit messages from the interactive console
          kernel.printk=4


